{% extends 'base.html' %}
{% block content %}

<style>
    /* Smooth scroll + sliding section effect */
    html {
        scroll-behavior: smooth;
    }

    .slide-section {
        scroll-snap-align: start;
        opacity: 0;
        transform: translateY(50px);
        transition: all 0.9s ease-out;
    }

    .slide-section.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Snap container */
    .snap-wrapper {
        scroll-snap-type: y mandatory;
    }
</style>

<div class="snap-wrapper max-w-6xl mx-auto py-10 px-6 space-y-16">

    <!-- Header -->
    <div class="slide-section text-center">
        <h1 class="text-4xl font-extrabold text-gray-900">‚ú® Resume Result Dashboard</h1>
        <p class="text-gray-600">Personalized AI evaluation for:
            <span class="text-blue-600 font-semibold">{{ job_role }}</span>
        </p>
    </div>

    <!-- ATS Score -->
    <div class="slide-section flex justify-center">
        <div class="bg-white shadow-md rounded-xl p-6 w-[290px] text-center border border-gray-200">
            <h2 class="text-lg font-semibold text-gray-700 mb-3">ATS Score</h2>
            <canvas id="atsGauge" width="200" height="200"></canvas>
            <p class="text-3xl mt-3 font-bold text-blue-600">{{ ats_score }}/100</p>
        </div>
    </div>

    <!-- Summary -->
    <div class="slide-section bg-white shadow-md p-6 rounded-xl border border-gray-200">
        <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">üìÑ Summary</h2>
        <div class="mt-3 text-gray-700 leading-relaxed prose max-w-none">
            {{ summary_html | safe }}
        </div>
    </div>


    <!-- Grid Sections -->
    <div class="slide-section grid md:grid-cols-2 gap-6">
        <div class="bg-white shadow-md p-6 rounded-xl border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-800">üí™ Strengths</h2>
            <ul class="mt-3 text-gray-700 space-y-3">
                {% for s in strengths %}<li>‚Ä¢ {{ s }}</li>{% endfor %}
            </ul>
        </div>

        <div class="bg-white shadow-md p-6 rounded-xl border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-800">‚ö† Weaknesses</h2>
            <ul class="mt-3 text-gray-700 space-y-3">
                {% for w in weaknesses %}<li>‚Ä¢ {{ w }}</li>{% endfor %}
            </ul>
        </div>

        <div class="bg-white shadow-md p-6 rounded-xl border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-800">üîç Missing Keywords</h2>
            <ul class="mt-3 text-gray-700 space-y-3">
                {% for m in missing_keywords %}<li>‚Ä¢ {{ m }}</li>{% endfor %}
            </ul>
        </div>

        <div class="bg-white shadow-md p-6 rounded-xl border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-800">üéØ Recommended Roles</h2>
            <ul class="mt-3 text-gray-700 space-y-3">
                {% for r in recommendations %}<li>‚Ä¢ {{ r }}</li>{% endfor %}
            </ul>
        </div>
    </div>

    <!-- Chart -->
    <div class="slide-section bg-white shadow-md rounded-xl p-6 border border-gray-200">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">üìä Skill Evaluation</h2>
        <canvas id="skillsChart"></canvas>
    </div>
     <!-- Recommended Job Openings -->
    {% if recommendations %}
    <div class="slide-section">
        <h2 class="text-xl font-bold text-gray-800 mb-4">üíº Recommended Job Openings</h2>
        <div class="space-y-4">
            {% for role in recommendations %}
            <div class="job-card p-4 bg-white shadow-md rounded-xl border border-gray-200">
                <h3 class="font-semibold text-gray-800">{{ role }}</h3>
                <p class="text-gray-600 text-sm">Explore openings on popular platforms:</p>
                <div class="flex gap-3 mt-2">
                    <a href="https://www.linkedin.com/jobs/search/?keywords={{ role | urlencode }}" target="_blank" class="text-blue-600 hover:underline">LinkedIn</a>
                    <a href="https://www.indeed.com/jobs?q={{ role | urlencode }}" target="_blank" class="text-green-600 hover:underline">Indeed</a>
                    <a href="https://www.glassdoor.com/Job/jobs.htm?sc.keyword={{ role | urlencode }}" target="_blank" class="text-purple-600 hover:underline">Glassdoor</a>
                </div>
                <p class="text-gray-500 text-sm mt-1">Tip: Tailor your resume to highlight skills relevant to {{ role }}.</p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Related Articles & News -->
<div class="slide-section">
    <h2 class="text-xl font-bold text-gray-800 mb-4">üì∞ Related Articles & News</h2>
    <div class="space-y-4">
        <div class="bg-white shadow-md p-4 rounded-xl border border-gray-200">
            <h3 class="font-semibold text-gray-800">Top Skills in Data Science for 2025</h3>
            <p class="text-gray-600 text-sm">Learn which skills are most in demand for Data Science roles this year.</p>
            <a href="https://www.example.com/data-science-skills" target="_blank" class="text-blue-600 hover:underline text-sm">Read more</a>
        </div>

        <div class="bg-white shadow-md p-4 rounded-xl border border-gray-200">
            <h3 class="font-semibold text-gray-800">AI in Recruitment: Trends You Must Know</h3>
            <p class="text-gray-600 text-sm">How AI is transforming hiring and what candidates should focus on.</p>
            <a href="https://www.example.com/ai-recruitment-trends" target="_blank" class="text-blue-600 hover:underline text-sm">Read more</a>
        </div>

        <div class="bg-white shadow-md p-4 rounded-xl border border-gray-200">
            <h3 class="font-semibold text-gray-800">Resume Optimization Tips for 2025</h3>
            <p class="text-gray-600 text-sm">Practical tips to make your resume stand out for ATS and recruiters.</p>
            <a href="https://www.example.com/resume-optimization" target="_blank" class="text-blue-600 hover:underline text-sm">Read more</a>
        </div>

        <div class="bg-white shadow-md p-4 rounded-xl border border-gray-200">
            <h3 class="font-semibold text-gray-800">Top Companies Hiring Remote AI Talent</h3>
            <p class="text-gray-600 text-sm">Discover which companies are actively hiring remote AI professionals worldwide.</p>
            <a href="https://www.example.com/remote-ai-jobs" target="_blank" class="text-blue-600 hover:underline text-sm">Read more</a>
        </div>
    </div>
</div>
<div class="flex flex-col items-center gap-12 mt-20 relative">

 <section class="max-w-3xl text-center mt-10">
        <h2 class="text-2xl font-bold text-gray-900 mb-3">ü§ñ Powered by AI Evaluation</h2>
        <p class="text-gray-600 leading-relaxed">
            Uses NLP, ATS benchmarking & deep analysis for formatting,
            <strong class="font-semibold text-gray-800">keywords, skill relevance & industry match.</strong>
        </p>
    </section>


    <p class="text-xs text-gray-500 mt-10 border-t border-gray-300 pt-3">
        Your file is processed temporarily and securely deleted after analysis.
    </p>
</div>
</div>

<!-- Fade-in on scroll JS -->
<script>
    const sections = document.querySelectorAll('.slide-section');
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) entry.target.classList.add('visible');
        });
    }, { threshold: 0.3 });
    sections.forEach(sec => observer.observe(sec));
</script>

<!-- Chart JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const gaugeCanvas = document.getElementById("atsGauge");
    const atsScore = {{ ats_score }};
    
    new Chart(gaugeCanvas, {
        type: "doughnut",
        data: { labels: ["Score", "Remaining"], datasets: [{ data: [atsScore, 100 - atsScore] }] },
        options: { cutout: "70%", plugins: { legend: { display: false } } }
    });

    const ctx = document.getElementById("skillsChart");
    const skillData = {{ skills_json | safe }};
    
    new Chart(ctx, {
        type: "bar",
        data: skillData,
        options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 100 } } }
    });
</script>


{% endblock %}
